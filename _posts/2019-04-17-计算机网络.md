---
title: 计算机网络
date: 2019-04-17 10:51:14
categories: 网络
tags: 
  - 网络
---

# 计算机网络与因特网

七层 OSI 参考模型

# 应用层

## 应用层协议

- HTTP
  - 无状态协议
  - 非持久连接
  - 持久连接
  - 请求报文格式
  - 响应报文格式
  - cookie
- FTP
  - 控制连接（持久）
  - 数据连接（非持久）
- 电子邮件协议
- DNS
  - UDP
- P2P 应用

# 传输层

- 端口和套接字
- 多路分解和多路复用

## UDP

- 应用层能更好地控制要发送的数据和发送时间（TCP拥塞时会遏制发送方发送）
- 无需建立连接
- 无连接状态（TCP需要维护连接状态，包括接收和发送缓存、拥塞控制参数、序号与确认号的参数）
- 分组首部开销小（每个TCP报文段有20字节的首部开销，而UDP仅有8字节的开销）

### UDP 报文段结构

- 源端口号
- 目的端口号
- 长度
- 校验和
- 报文

## 可靠数据传输

### 回退 N 步

### 选择重传

## TCP

### TCP 报文段结构

- 序号
- 确认号
- 首部长度
- 选项字段
- 标志字段
- 接收窗口

### 流量控制
发送方轮流跟踪两个变量LastByteSent和LastByteAcked，这两个变量之差就是发送到连接中但未被确认的数据量。通过将其控制在RcvWindow内，就能实现流量控制

### 连接管理

- 三次握手
  - 两次握手
  - 四次握手
  - SYN洪泛攻击
- 四次挥手
  - TIME-WAIT 状态

### 拥塞控制

- 端到端拥塞控制
- 网络辅助的拥塞控制


TCP 拥塞控制：TCP连接的两方都记录一个额外的变量：拥塞窗口(CongWin)
- 加性增、乘性减
- 慢启动
- 对拥塞指示作出反应
  - 3次冗余 ACK
  - 超时

# 网络层

## 网络层功能和服务

- 转发
- 选路
- 建立连接

## IP

### 数据报格式

### IP 数据报分片

## IPv4 编址

- 分类编址：A类、B类、C类
- 无类别域间选路：a.b.c.d/x

## DHCP

## NAT

## ICMP
ICMP用于主机和路由器彼此交互网络层信息。最典型的用途是差错报告，但其用途不仅限于此(如源抑制，用于拥塞控制)

ping traceroute

## IPV6

### ipv6 数据报格式


# 链路层和局域网

- MAC
- ARP